class r{constructor(){this.init(),this.setupObservers(),this.setupEventListeners()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.start()):this.start()}start(){this.animateCounters(),this.setupProgressCircles(),this.setupHoverEffects(),this.setupTooltips(),this.setupLoadingStates()}setupObservers(){this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting&&this.triggerEntryAnimation(o.target)})},{threshold:.1,rootMargin:"50px"}),document.querySelectorAll(".fi-wi-stats-overview-card").forEach(e=>{this.intersectionObserver.observe(e)})}setupEventListeners(){document.addEventListener("livewire:update",()=>{setTimeout(()=>this.start(),100)}),document.addEventListener("filament-panel-update",()=>{setTimeout(()=>this.start(),100)})}animateCounters(){document.querySelectorAll(".animate-counter").forEach(o=>{if(o.dataset.animated)return;const t=this.extractNumber(o.textContent);t!==null&&(o.dataset.animated="true",this.animateCounterValue(o,0,t,1e3))})}extractNumber(e){const o=e.match(/[\d,]+/);return o?parseInt(o[0].replace(/,/g,"")):null}animateCounterValue(e,o,t,s){const a=performance.now(),n=e.textContent;n.replace(/[\d,]+/,"");const i=d=>{const u=d-a,l=Math.min(u/s,1),m=1-Math.pow(1-l,3),p=Math.floor(o+(t-o)*m).toLocaleString("id-ID");e.textContent=n.replace(/[\d,]+/,p),l<1&&requestAnimationFrame(i)};requestAnimationFrame(i)}setupProgressCircles(){document.querySelectorAll(".progress-circle").forEach(o=>{const t=o.dataset.percentage||0,s=o.querySelector(".progress-fill");s&&setTimeout(()=>{const a=2*Math.PI*16,n=a-t/100*a;s.style.strokeDashoffset=n,o.classList.add("animate")},500)})}setupHoverEffects(){document.querySelectorAll(".quick-action-card, .notification-card, .fi-wi-stats-overview-card").forEach(o=>{o.addEventListener("mouseenter",t=>{this.addHoverGlow(t.target),this.animateIcons(t.target)}),o.addEventListener("mouseleave",t=>{this.removeHoverGlow(t.target)})})}addHoverGlow(e){const o=document.createElement("div");o.className="absolute inset-0 bg-gradient-to-r from-primary-500/10 to-transparent rounded-2xl pointer-events-none transition-opacity duration-300",o.style.opacity="0",e.style.position="relative",e.appendChild(o),requestAnimationFrame(()=>{o.style.opacity="1"})}removeHoverGlow(e){const o=e.querySelector(".absolute.inset-0.bg-gradient-to-r");o&&(o.style.opacity="0",setTimeout(()=>{o.parentNode&&o.parentNode.removeChild(o)},300))}animateIcons(e){e.querySelectorAll("svg, .bounce-icon, .rotate-icon").forEach((t,s)=>{setTimeout(()=>{t.classList.contains("bounce-icon")?t.style.animation="smooth-bounce 0.6s ease-in-out":t.classList.contains("rotate-icon")?t.style.animation="rotate-scale 0.8s ease-in-out":(t.style.transform="scale(1.1) rotate(5deg)",t.style.transition="transform 0.3s ease-out"),setTimeout(()=>{t.style.animation="",t.style.transform=""},600)},s*100)})}setupTooltips(){document.querySelectorAll("[data-tooltip]").forEach(o=>{o.addEventListener("mouseenter",t=>{this.showTooltip(t.target,t.target.dataset.tooltip)}),o.addEventListener("mouseleave",t=>{this.hideTooltip(t.target)})})}showTooltip(e,o){const t=document.createElement("div");t.className="tooltip",t.textContent=o,document.body?document.body.appendChild(t):document.documentElement.appendChild(t);const s=e.getBoundingClientRect();t.style.left=s.left+s.width/2+"px",t.style.top=s.top-40+"px",requestAnimationFrame(()=>{t.classList.add("show")}),e._tooltip=t}hideTooltip(e){e._tooltip&&(e._tooltip.classList.remove("show"),setTimeout(()=>{e._tooltip&&e._tooltip.parentNode&&e._tooltip.parentNode.removeChild(e._tooltip),e._tooltip=null},200))}setupLoadingStates(){document.querySelectorAll(".skeleton-loading").forEach((t,s)=>{t.style.animationDelay=s*.1+"s"}),document.querySelectorAll(".loading-dots").forEach(t=>{if(t.children.length===0)for(let s=0;s<3;s++){const a=document.createElement("div");t.appendChild(a)}})}triggerEntryAnimation(e){e.dataset.entryAnimated||(e.dataset.entryAnimated="true",e.style.opacity="0",e.style.transform="translateY(30px)",requestAnimationFrame(()=>{e.style.transition="all 0.6s ease-out",e.style.opacity="1",e.style.transform="translateY(0)"}))}static animateValue(e,o,t=1e3){new r().animateCounterValue(e,0,o,t)}static addLoadingState(e){e.classList.add("skeleton-loading");const o=document.createElement("div");o.className="loading-dots";for(let t=0;t<3;t++)o.appendChild(document.createElement("div"));e.appendChild(o)}static removeLoadingState(e){e.classList.remove("skeleton-loading");const o=e.querySelector(".loading-dots");o&&o.remove()}}class h{static animateChartBars(e){e.querySelectorAll("rect, .chart-bar").forEach((t,s)=>{t.style.transform="scaleY(0)",t.style.transformOrigin="bottom",t.style.transition=`transform ${.5+s*.1}s ease-out`,setTimeout(()=>{t.style.transform="scaleY(1)"},s*100)})}static animateChartLines(e){e.querySelectorAll("path, .chart-line").forEach((t,s)=>{const a=t.getTotalLength?t.getTotalLength():100;t.style.strokeDasharray=a,t.style.strokeDashoffset=a,t.style.transition=`stroke-dashoffset ${1+s*.2}s ease-out`,setTimeout(()=>{t.style.strokeDashoffset=0},s*200)})}}const f=new r;window.WidgetAnimationController=r;window.ChartAnimationController=h;setInterval(()=>{if(document.hidden)return;document.querySelectorAll(".animate-counter:not([data-animated])").length>0&&f.animateCounters()},2e3);
